<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Predicting breast cancer recurrence events using random forests | Data Science portfolio Thijmen Weijgertze</title>
  <meta name="description" content="Data Science portfolio for the “Data Science For Biology” course given by the “HU University of Applied Sciences Utrecht written by Thijmen Weijgertze”" />
  <meta name="generator" content="bookdown 0.39 and GitBook 2.6.7" />

  <meta property="og:title" content="Predicting breast cancer recurrence events using random forests | Data Science portfolio Thijmen Weijgertze" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Data Science portfolio for the “Data Science For Biology” course given by the “HU University of Applied Sciences Utrecht written by Thijmen Weijgertze”" />
  <meta name="github-repo" content="ThijmenWeijgertze/PortofolioBookdown" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Predicting breast cancer recurrence events using random forests | Data Science portfolio Thijmen Weijgertze" />
  
  <meta name="twitter:description" content="Data Science portfolio for the “Data Science For Biology” course given by the “HU University of Applied Sciences Utrecht written by Thijmen Weijgertze”" />
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="id_04.html"/>
<link rel="next" href="id_06.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<script src="libs/core-js-2.5.3/shim.min.js"></script>
<script src="libs/react-18.2.0/react.min.js"></script>
<script src="libs/react-18.2.0/react-dom.min.js"></script>
<script src="libs/reactwidget-1.0.0/react-tools.js"></script>
<link href="libs/htmltools-fill-0.5.8/fill.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="libs/reactable-0.4.4/reactable.css" rel="stylesheet" />
<script src="libs/reactable-binding-0.4.4/reactable.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="toc"><h2>Table of Contents</h2></li>
<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Main Page</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#introduction"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#toc"><i class="fa fa-check"></i>Toc</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#contact-information"><i class="fa fa-check"></i>Contact information</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="id_00.html"><a href="id_00.html"><i class="fa fa-check"></i>MetaData</a>
<ul>
<li class="chapter" data-level="" data-path="id_00.html"><a href="id_00.html#source-code"><i class="fa fa-check"></i>Source code</a></li>
<li class="chapter" data-level="" data-path="id_00.html"><a href="id_00.html#how-to-build-the-book-localy"><i class="fa fa-check"></i>How to build the book localy</a></li>
<li class="chapter" data-level="" data-path="id_00.html"><a href="id_00.html#dependency-packages"><i class="fa fa-check"></i>Dependency packages</a></li>
<li class="chapter" data-level="" data-path="id_00.html"><a href="id_00.html#directory-roadmap"><i class="fa fa-check"></i>Directory roadmap</a></li>
<li class="chapter" data-level="" data-path="id_00.html"><a href="id_00.html#project-directory-folder"><i class="fa fa-check"></i>Project directory folder</a></li>
<li class="chapter" data-level="" data-path="id_00.html"><a href="id_00.html#css-folder"><i class="fa fa-check"></i>css folder</a></li>
<li class="chapter" data-level="" data-path="id_00.html"><a href="id_00.html#dataraw-data-folder"><i class="fa fa-check"></i>dataRaw &amp; data folder</a></li>
<li class="chapter" data-level="" data-path="id_00.html"><a href="id_00.html#scripts"><i class="fa fa-check"></i>scripts</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="id_01.html"><a href="id_01.html"><i class="fa fa-check"></i>DataScience CV</a>
<ul>
<li class="chapter" data-level="" data-path="id_01.html"><a href="id_01.html#about-me"><i class="fa fa-check"></i>About me</a></li>
<li class="chapter" data-level="" data-path="id_01.html"><a href="id_01.html#my-education"><i class="fa fa-check"></i>My education</a></li>
<li class="chapter" data-level="" data-path="id_01.html"><a href="id_01.html#my-most-relevant-skills-related-to-datascience-alphabetical-order"><i class="fa fa-check"></i>My most relevant skills related to DataScience (alphabetical order)</a></li>
<li class="chapter" data-level="" data-path="id_01.html"><a href="id_01.html#contact-info"><i class="fa fa-check"></i>Contact info</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="id_02.html"><a href="id_02.html"><i class="fa fa-check"></i>Guerrilla Analytics</a>
<ul>
<li class="chapter" data-level="" data-path="id_02.html"><a href="id_02.html#example-project"><i class="fa fa-check"></i>Example Project</a></li>
<li class="chapter" data-level="" data-path="id_02.html"><a href="id_02.html#root-of-this-bookdown-project"><i class="fa fa-check"></i>Root Of This Bookdown Project</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="id_03.html"><a href="id_03.html"><i class="fa fa-check"></i>C. Elegans plate experiment</a>
<ul>
<li class="chapter" data-level="" data-path="id_03.html"><a href="id_03.html#setup"><i class="fa fa-check"></i>Setup</a></li>
<li class="chapter" data-level="" data-path="id_03.html"><a href="id_03.html#scatterplot"><i class="fa fa-check"></i>Scatterplot</a></li>
<li class="chapter" data-level="" data-path="id_03.html"><a href="id_03.html#normalizing-data"><i class="fa fa-check"></i>normalizing data</a></li>
<li class="chapter" data-level="" data-path="id_03.html"><a href="id_03.html#statistical-tests"><i class="fa fa-check"></i>Statistical tests</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="id_04.html"><a href="id_04.html"><i class="fa fa-check"></i>Open Peer Review</a>
<ul>
<li class="chapter" data-level="" data-path="id_04.html"><a href="id_04.html#introduction-1"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="" data-path="id_04.html"><a href="id_04.html#criteria-sumnerreproducibilityreportingpractices2020"><i class="fa fa-check"></i>Criteria <span class="citation">Sumner et al. (2020)</span></a></li>
<li class="chapter" data-level="" data-path="id_04.html"><a href="id_04.html#about-the-article"><i class="fa fa-check"></i>About the article</a></li>
<li class="chapter" data-level="" data-path="id_04.html"><a href="id_04.html#open-peer-review"><i class="fa fa-check"></i>Open Peer Review</a></li>
<li class="chapter" data-level="" data-path="id_04.html"><a href="id_04.html#conclusion"><i class="fa fa-check"></i>Conclusion</a></li>
<li class="chapter" data-level="" data-path="id_04.html"><a href="id_04.html#reproducing-r-code-palayewcovid19vaccinepaper2020"><i class="fa fa-check"></i>Reproducing R code <span class="citation">Palayew (2020)</span></a></li>
<li class="chapter" data-level="" data-path="id_04.html"><a href="id_04.html#conclusion-on-covid-19-vaccin-paper"><i class="fa fa-check"></i>Conclusion on COVID-19 vaccin paper</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="id_05.html"><a href="id_05.html"><i class="fa fa-check"></i>Predicting breast cancer recurrence events using random forests</a>
<ul>
<li class="chapter" data-level="" data-path="id_05.html"><a href="id_05.html#introduction-2"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="" data-path="id_05.html"><a href="id_05.html#goal"><i class="fa fa-check"></i>Goal</a></li>
<li class="chapter" data-level="" data-path="id_05.html"><a href="id_05.html#data"><i class="fa fa-check"></i>Data</a></li>
<li class="chapter" data-level="" data-path="id_05.html"><a href="id_05.html#planning"><i class="fa fa-check"></i>Planning</a></li>
<li class="chapter" data-level="" data-path="id_05.html"><a href="id_05.html#dataset"><i class="fa fa-check"></i>Dataset</a></li>
<li class="chapter" data-level="" data-path="id_05.html"><a href="id_05.html#data-wrangling"><i class="fa fa-check"></i>Data Wrangling</a></li>
<li class="chapter" data-level="" data-path="id_05.html"><a href="id_05.html#splitting-the-data"><i class="fa fa-check"></i>Splitting the data</a></li>
<li class="chapter" data-level="" data-path="id_05.html"><a href="id_05.html#resampling-the-random-forest-model"><i class="fa fa-check"></i>Resampling the random forest model</a></li>
<li class="chapter" data-level="" data-path="id_05.html"><a href="id_05.html#creating-a-random-forest-model-using-ranger"><i class="fa fa-check"></i>Creating a random forest model using Ranger</a></li>
<li class="chapter" data-level="" data-path="id_05.html"><a href="id_05.html#tuning-and-training-the-randomforest-engine"><i class="fa fa-check"></i>Tuning and training the randomForest engine</a></li>
<li class="chapter" data-level="" data-path="id_05.html"><a href="id_05.html#creating-a-random-forest-model-using-randomforest"><i class="fa fa-check"></i>Creating a random forest model using randomForest</a></li>
<li class="chapter" data-level="" data-path="id_05.html"><a href="id_05.html#tuning-and-training-the-randomforest-engine-1"><i class="fa fa-check"></i>Tuning and training the randomForest engine</a></li>
<li class="chapter" data-level="" data-path="id_05.html"><a href="id_05.html#final-models-comparison"><i class="fa fa-check"></i>Final models comparison</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="id_06.html"><a href="id_06.html"><i class="fa fa-check"></i>Rpackage (twPackage)</a>
<ul>
<li class="chapter" data-level="" data-path="id_06.html"><a href="id_06.html#introduction-3"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="" data-path="id_06.html"><a href="id_06.html#installation"><i class="fa fa-check"></i>Installation</a></li>
<li class="chapter" data-level="" data-path="id_06.html"><a href="id_06.html#function-and-data-explanation"><i class="fa fa-check"></i>Function and data explanation</a></li>
<li class="chapter" data-level="" data-path="id_06.html"><a href="id_06.html#function-examples"><i class="fa fa-check"></i>Function examples</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="id_07.html"><a href="id_07.html"><i class="fa fa-check"></i>Antimicrobial resistance project</a>
<ul>
<li class="chapter" data-level="" data-path="id_07.html"><a href="id_07.html#introduction-4"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="" data-path="id_07.html"><a href="id_07.html#principle"><i class="fa fa-check"></i>Principle</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="id_08.html"><a href="id_08.html"><i class="fa fa-check"></i>Analyzing Covid-19 data using parameters</a>
<ul>
<li class="chapter" data-level="" data-path="id_08.html"><a href="id_08.html#selected-parameters"><i class="fa fa-check"></i>Selected parameters</a></li>
<li class="chapter" data-level="" data-path="id_08.html"><a href="id_08.html#psuedocode-pyramid-plot"><i class="fa fa-check"></i>Psuedocode pyramid plot</a></li>
<li class="chapter" data-level="" data-path="id_08.html"><a href="id_08.html#data-reading"><i class="fa fa-check"></i>Data reading</a></li>
<li class="chapter" data-level="" data-path="id_08.html"><a href="id_08.html#prepare-the-data-for-the-pyramid-plot"><i class="fa fa-check"></i>prepare the data for the pyramid plot</a></li>
<li class="chapter" data-level="" data-path="id_08.html"><a href="id_08.html#pyramid-plot"><i class="fa fa-check"></i>Pyramid plot</a></li>
<li class="chapter" data-level="" data-path="id_08.html"><a href="id_08.html#preparing-the-data-for-the-heatmap"><i class="fa fa-check"></i>Preparing the data for the heatmap</a></li>
<li class="chapter" data-level="" data-path="id_08.html"><a href="id_08.html#heatmap-raschkashorttutorialdecent0000"><i class="fa fa-check"></i>Heatmap <span class="citation">Raschka (09:00:00 +0000)</span></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="id_20.html"><a href="id_20.html"><i class="fa fa-check"></i>Appendix 1: COVID-19 Vaccine paper</a>
<ul>
<li class="chapter" data-level="" data-path="id_20.html"><a href="id_20.html#loading-and-wrangling-data"><i class="fa fa-check"></i>loading and wrangling data</a></li>
<li class="chapter" data-level="" data-path="id_20.html"><a href="id_20.html#questioni-would-follow-my-employers-recommendation-to-get-a-covid-19-vaccine-once-the-government-has-approved-it-as-safe-and-effective."><i class="fa fa-check"></i>Question:I would follow my employer’s recommendation to get a COVID-19 vaccine once the government has approved it as safe and effective.</a></li>
<li class="chapter" data-level="" data-path="id_20.html"><a href="id_20.html#questionif-a-covid-19-vaccine-is-proven-safe-and-effective-and-is-available-to-me-i-will-take-it."><i class="fa fa-check"></i>Question:If a COVID-19 vaccine is proven safe and effective and is available to me, I will take it.</a></li>
<li class="chapter" data-level="" data-path="id_20.html"><a href="id_20.html#regression"><i class="fa fa-check"></i>regression</a></li>
<li class="chapter" data-level="" data-path="id_20.html"><a href="id_20.html#regression-1"><i class="fa fa-check"></i>regression</a></li>
<li class="chapter" data-level="" data-path="id_20.html"><a href="id_20.html#table"><i class="fa fa-check"></i>Table</a></li>
<li class="chapter" data-level="" data-path="id_20.html"><a href="id_20.html#supplemental-figure"><i class="fa fa-check"></i>Supplemental figure</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="id_21.html"><a href="id_21.html"><i class="fa fa-check"></i>Bibliography</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Science portfolio Thijmen Weijgertze</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="id_05" class="section level1">
<h1>Predicting breast cancer recurrence events using random forests</h1>
<div id="introduction-2" class="section level3">
<h3>Introduction</h3>
<p>During the “Data Science for biology 2” course every student has the opportunity to learn a new skill for their portfolio. I have decided to introduce myself into “Machine Learning”. I haven chosen machine learning, because over the past decade it has become an important skill in DataScience. Implementing algorithms to predict medical outcomes, using available data sets, is important for early medical diagnoses. Furthermore machine learning makes it possible to analyze more factors and relations within the data at once. This can be highly beneficial while working with large data sets within the field of Life Sciences.</p>
</div>
<div id="goal" class="section level3">
<h3>Goal</h3>
<p>At the end of this course I want to have created an algorithm able to predict the recurrence of breast cancer using the breast-cancer data set. The algorithm will use the R package “tidymodels” for machine learning.</p>
</div>
<div id="data" class="section level3">
<h3>Data</h3>
<p>This breast cancer domain was obtained from the University Medical Centre, Institute of Oncology, Ljubljana, Yugoslavia. Thanks go to M. Zwitter and M. Soklic for providing the data. <span class="citation">Matjaz Zwitter (1988)</span></p>
<p>The table consist of the following variables:</p>
<ul>
<li><p>Class: no-recurrence-events, recurrence-events</p></li>
<li><p>age: 10-19, 20-29, 30-39, 40-49, 50-59, 60-69, 70-79, 80-89, 90-99.</p></li>
<li><p>menopause: lt40, ge40, premeno.</p></li>
<li><p>tumor-size: 0-4, 5-9, 10-14, 15-19, 20-24, 25-29, 30-34, 35-39, 40-44, 45-49, 50-54, 55-59.</p></li>
<li><p>inv-nodes: 0-2, 3-5, 6-8, 9-11, 12-14, 15-17, 18-20, 21-23, 24-26, 27-29, 30-32, 33-35, 36-39.</p></li>
<li><p>node-caps: yes, no.</p></li>
<li><p>deg-malig: 1, 2, 3.</p></li>
<li><p>breast: left, right.</p></li>
<li><p>breast-quad: left-up, left-low, right-up, right-low, central.</p></li>
<li><p>irradiat: yes, no.</p></li>
</ul>
<p>There are a total of 286 instances from which 201 no-recurrence-events and 85 recurrence-events.</p>
</div>
<div id="planning" class="section level3">
<h3>Planning</h3>
<p>I’ll spend 30 hours across 4 days on this skill across 2 weeks</p>
<p>Week 1:
- Day 1: Delving into the get started guide from tidymodels
- Day 2: Delving into the get started guide from tidymodels</p>
<p>Week 2:
- Day 3: Apply the learned skills on the breast-cancer data set to predict the recurrence of breast cancer.
- Day 4: Extension of past days</p>
</div>
<div id="dataset" class="section level3">
<h3>Dataset</h3>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="id_05.html#cb31-1" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb31-2"><a href="id_05.html#cb31-2" tabindex="-1"></a><span class="fu">library</span>(reactable)</span>
<span id="cb31-3"><a href="id_05.html#cb31-3" tabindex="-1"></a></span>
<span id="cb31-4"><a href="id_05.html#cb31-4" tabindex="-1"></a><span class="co"># loading in data</span></span>
<span id="cb31-5"><a href="id_05.html#cb31-5" tabindex="-1"></a>bcData <span class="ot">&lt;-</span> <span class="fu">read.csv</span>( </span>
<span id="cb31-6"><a href="id_05.html#cb31-6" tabindex="-1"></a>  here<span class="sc">::</span><span class="fu">here</span>(</span>
<span id="cb31-7"><a href="id_05.html#cb31-7" tabindex="-1"></a>    <span class="st">&quot;data&quot;</span>,</span>
<span id="cb31-8"><a href="id_05.html#cb31-8" tabindex="-1"></a>    <span class="st">&quot;breast-cancer.data&quot;</span></span>
<span id="cb31-9"><a href="id_05.html#cb31-9" tabindex="-1"></a>  ), </span>
<span id="cb31-10"><a href="id_05.html#cb31-10" tabindex="-1"></a>  <span class="at">header =</span> <span class="cn">FALSE</span>, <span class="co"># dataset does not contain column names</span></span>
<span id="cb31-11"><a href="id_05.html#cb31-11" tabindex="-1"></a>  <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">&quot;class&quot;</span>, <span class="st">&quot;age&quot;</span>, <span class="st">&quot;menopause&quot;</span>, <span class="st">&quot;tumor_size&quot;</span>, <span class="st">&quot;inv_nodes&quot;</span>, <span class="st">&quot;node_caps&quot;</span>, <span class="st">&quot;deg_malig&quot;</span>, <span class="st">&quot;breast&quot;</span>, <span class="st">&quot;breast_quad&quot;</span>, <span class="st">&quot;irradiat&quot;</span>) <span class="co"># setting column names</span></span>
<span id="cb31-12"><a href="id_05.html#cb31-12" tabindex="-1"></a>)</span>
<span id="cb31-13"><a href="id_05.html#cb31-13" tabindex="-1"></a></span>
<span id="cb31-14"><a href="id_05.html#cb31-14" tabindex="-1"></a><span class="co"># presenting data in table form</span></span>
<span id="cb31-15"><a href="id_05.html#cb31-15" tabindex="-1"></a><span class="fu">reactable</span>(</span>
<span id="cb31-16"><a href="id_05.html#cb31-16" tabindex="-1"></a>  bcData, </span>
<span id="cb31-17"><a href="id_05.html#cb31-17" tabindex="-1"></a>  <span class="at">filterable =</span> <span class="cn">TRUE</span>,</span>
<span id="cb31-18"><a href="id_05.html#cb31-18" tabindex="-1"></a>  <span class="at">compact =</span> <span class="cn">TRUE</span>,</span>
<span id="cb31-19"><a href="id_05.html#cb31-19" tabindex="-1"></a>  <span class="at">bordered =</span> <span class="cn">TRUE</span>,</span>
<span id="cb31-20"><a href="id_05.html#cb31-20" tabindex="-1"></a>  <span class="at">defaultPageSize =</span> <span class="dv">5</span></span>
<span id="cb31-21"><a href="id_05.html#cb31-21" tabindex="-1"></a>  )</span></code></pre></div>
<div class="reactable html-widget html-fill-item" id="htmlwidget-8dde702a04aab8ec228c" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-8dde702a04aab8ec228c">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"class":["no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","no-recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events","recurrence-events"],"age":["30-39","40-49","40-49","60-69","40-49","60-69","50-59","60-69","40-49","40-49","40-49","50-59","60-69","50-59","40-49","60-69","40-49","50-59","60-69","50-59","50-59","60-69","30-39","50-59","50-59","40-49","50-59","60-69","40-49","60-69","50-59","50-59","50-59","50-59","50-59","30-39","50-59","50-59","40-49","40-49","50-59","60-69","60-69","40-49","50-59","50-59","40-49","50-59","40-49","40-49","50-59","30-39","50-59","70-79","70-79","70-79","50-59","50-59","60-69","60-69","40-49","40-49","50-59","20-29","40-49","40-49","40-49","50-59","50-59","60-69","60-69","40-49","60-69","50-59","30-39","50-59","50-59","30-39","50-59","40-49","50-59","60-69","60-69","50-59","40-49","50-59","60-69","70-79","50-59","40-49","30-39","50-59","50-59","60-69","50-59","40-49","60-69","60-69","40-49","30-39","40-49","50-59","50-59","40-49","40-49","40-49","40-49","30-39","40-49","60-69","50-59","50-59","40-49","40-49","40-49","50-59","30-39","40-49","30-39","60-69","60-69","50-59","50-59","50-59","60-69","70-79","30-39","30-39","50-59","40-49","40-49","40-49","40-49","50-59","60-69","30-39","30-39","40-49","30-39","40-49","50-59","50-59","60-69","40-49","60-69","40-49","60-69","50-59","30-39","50-59","50-59","60-69","50-59","60-69","30-39","60-69","50-59","50-59","50-59","40-49","40-49","40-49","60-69","60-69","60-69","40-49","40-49","40-49","50-59","40-49","30-39","30-39","60-69","50-59","50-59","40-49","40-49","60-69","50-59","40-49","40-49","40-49","40-49","50-59","50-59","40-49","50-59","60-69","40-49","50-59","40-49","40-49","50-59","30-39","50-59","50-59","50-59","40-49","50-59","50-59","60-69","50-59","40-49","50-59","50-59","30-39","50-59","50-59","50-59","40-49","40-49","50-59","40-49","50-59","60-69","40-49","50-59","40-49","60-69","30-39","40-49","30-39","60-69","60-69","30-39","40-49","40-49","50-59","60-69","60-69","50-59","40-49","30-39","70-79","60-69","50-59","40-49","40-49","30-39","40-49","60-69","40-49","50-59","50-59","40-49","30-39","30-39","50-59","60-69","30-39","40-49","40-49","30-39","60-69","40-49","40-49","40-49","40-49","50-59","50-59","60-69","40-49","60-69","50-59","50-59","30-39","40-49","60-69","30-39","40-49","50-59","50-59","40-49","60-69","60-69","40-49","30-39","60-69","50-59","50-59","50-59","30-39","30-39","60-69","40-49","50-59"],"menopause":["premeno","premeno","premeno","ge40","premeno","ge40","premeno","ge40","premeno","premeno","premeno","ge40","lt40","ge40","premeno","lt40","premeno","premeno","ge40","ge40","ge40","ge40","premeno","premeno","premeno","premeno","premeno","ge40","premeno","ge40","ge40","premeno","premeno","ge40","ge40","premeno","ge40","ge40","premeno","premeno","ge40","ge40","ge40","premeno","ge40","ge40","premeno","premeno","premeno","premeno","lt40","premeno","premeno","ge40","ge40","ge40","ge40","ge40","ge40","ge40","premeno","premeno","ge40","premeno","premeno","premeno","premeno","ge40","ge40","ge40","ge40","premeno","ge40","premeno","premeno","ge40","ge40","premeno","premeno","premeno","ge40","ge40","ge40","ge40","premeno","ge40","ge40","ge40","ge40","premeno","premeno","ge40","ge40","ge40","premeno","premeno","ge40","ge40","premeno","premeno","ge40","ge40","premeno","premeno","premeno","premeno","premeno","premeno","premeno","ge40","ge40","ge40","premeno","premeno","premeno","ge40","premeno","ge40","premeno","ge40","ge40","ge40","ge40","ge40","ge40","ge40","premeno","premeno","premeno","premeno","premeno","premeno","premeno","ge40","ge40","premeno","premeno","premeno","premeno","premeno","ge40","premeno","ge40","premeno","ge40","premeno","ge40","premeno","premeno","lt40","ge40","ge40","ge40","ge40","lt40","ge40","ge40","premeno","ge40","premeno","premeno","premeno","ge40","ge40","ge40","premeno","premeno","ge40","premeno","ge40","premeno","premeno","ge40","ge40","premeno","premeno","ge40","ge40","premeno","premeno","premeno","premeno","premeno","ge40","ge40","premeno","ge40","ge40","premeno","ge40","premeno","premeno","ge40","premeno","premeno","ge40","premeno","premeno","ge40","premeno","ge40","premeno","premeno","ge40","premeno","premeno","ge40","premeno","premeno","premeno","premeno","ge40","premeno","premeno","ge40","ge40","ge40","premeno","ge40","premeno","premeno","premeno","ge40","ge40","premeno","ge40","premeno","premeno","ge40","ge40","premeno","premeno","premeno","ge40","ge40","premeno","premeno","premeno","premeno","premeno","ge40","premeno","ge40","ge40","premeno","premeno","premeno","ge40","ge40","premeno","premeno","premeno","premeno","ge40","premeno","premeno","premeno","premeno","ge40","ge40","ge40","ge40","ge40","lt40","lt40","premeno","premeno","ge40","premeno","premeno","ge40","premeno","premeno","ge40","ge40","premeno","premeno","ge40","premeno","ge40","ge40","premeno","premeno","ge40","ge40","ge40"],"tumor_size":["30-34","20-24","20-24","15-19","0-4","15-19","25-29","20-24","50-54","20-24","0-4","25-29","10-14","25-29","30-34","30-34","15-19","30-34","30-34","30-34","40-44","15-19","25-29","40-44","35-39","25-29","20-24","25-29","40-44","30-34","40-44","15-19","10-14","10-14","10-14","30-34","0-4","15-19","10-14","30-34","20-24","25-29","5-9","10-14","50-54","30-34","25-29","25-29","20-24","20-24","15-19","20-24","15-19","20-24","40-44","40-44","0-4","5-9","30-34","15-19","20-24","10-14","0-4","35-39","25-29","10-14","25-29","20-24","35-39","50-54","10-14","25-29","20-24","15-19","5-9","10-14","10-14","25-29","25-29","25-29","10-14","10-14","15-19","15-19","20-24","35-39","25-29","0-4","20-24","40-44","0-4","20-24","25-29","20-24","10-14","30-34","30-34","15-19","30-34","25-29","20-24","30-34","25-29","20-24","10-14","30-34","20-24","40-44","30-34","30-34","25-29","15-19","20-24","10-14","35-39","20-24","15-19","20-24","10-14","15-19","20-24","15-19","40-44","30-34","10-14","10-14","30-34","25-29","25-29","35-39","35-39","40-44","30-34","40-44","30-34","20-24","40-44","5-9","40-44","30-34","40-44","20-24","10-14","45-49","45-49","25-29","50-54","30-34","20-24","30-34","25-29","30-34","35-39","15-19","15-19","40-44","25-29","30-34","30-34","35-39","25-29","30-34","10-14","25-29","25-29","20-24","20-24","40-44","10-14","30-34","20-24","15-19","30-34","20-24","25-29","30-34","25-29","10-14","25-29","20-24","35-39","35-39","25-29","30-34","30-34","20-24","25-29","15-19","10-14","20-24","15-19","25-29","30-34","10-14","50-54","35-39","10-14","10-14","15-19","25-29","25-29","15-19","40-44","35-39","25-29","0-4","30-34","25-29","30-34","35-39","20-24","20-24","30-34","25-29","40-44","20-24","20-24","15-19","30-34","15-19","25-29","30-34","25-29","20-24","25-29","20-24","30-34","30-34","40-44","45-49","50-54","30-34","30-34","15-19","30-34","25-29","25-29","25-29","35-39","20-24","20-24","15-19","25-29","20-24","30-34","30-34","15-19","30-34","35-39","20-24","25-29","50-54","40-44","50-54","30-34","30-34","30-34","20-24","30-34","30-34","25-29","25-29","25-29","20-24","20-24","35-39","30-34","20-24","35-39","25-29","30-34","25-29","15-19","30-34","30-34","25-29","25-29","10-14","35-39","40-44","40-44","30-34","20-24","20-24","30-34","30-34"],"inv_nodes":["0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","6-8","6-8","0-2","9-11","9-11","3-5","6-8","0-2","0-2","3-5","3-5","0-2","0-2","0-2","3-5","3-5","0-2","0-2","6-8","0-2","0-2","3-5","0-2","0-2","15-17","3-5","15-17","0-2","0-2","3-5","3-5","0-2","0-2","0-2","0-2","3-5","0-2","3-5","3-5","3-5","3-5","15-17","0-2","0-2","3-5","0-2","6-8","3-5","3-5","0-2","0-2","0-2","3-5","0-2","0-2","0-2","0-2","9-11","9-11","6-8","0-2","0-2","0-2","0-2","12-14","0-2","6-8","0-2","0-2","0-2","3-5","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","0-2","3-5","3-5","15-17","0-2","3-5","0-2","9-11","3-5","3-5","9-11","0-2","3-5","0-2","0-2","0-2","3-5","3-5","15-17","6-8","3-5","12-14","9-11","6-8","9-11","6-8","3-5","0-2","0-2","0-2","0-2","0-2","6-8","0-2","3-5","6-8","3-5","3-5","12-14","0-2","0-2","0-2","9-11","3-5","24-26","0-2","0-2","6-8","0-2","0-2","0-2","3-5","9-11","6-8","6-8","15-17","6-8","6-8","0-2","0-2","0-2","3-5","3-5"],"node_caps":["no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","yes","yes","yes","yes","yes","yes","no","no","no","no","no","no","no","no","yes","yes","no","no","yes","?","no","yes","no","no","yes","yes","no","no","no","no","yes","no","no","no","no","yes","no","?","?","no","no","yes","no","no","yes","no","yes","yes","yes","no","no","no","no","no","yes","yes","no","?","?","no","no","no","no","yes","no","no","yes","no","yes","no","no","no","yes","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","yes","no","yes","no","yes","no","yes","no","no","?","no","yes","no","no","no","yes","no","yes","no","yes","yes","no","yes","yes","yes","yes","no","no","no","no","yes","yes","no","yes","yes","no","no","yes","no","?","?","yes","yes","yes","no","no","yes","no","yes","yes","yes","yes","yes","yes","yes","yes","yes","no","no","no","no","no"],"deg_malig":[3,2,2,2,2,2,2,1,2,2,3,2,1,3,3,1,2,3,3,1,2,2,2,2,2,2,1,3,2,2,3,2,3,1,1,2,2,1,2,1,1,2,1,2,1,1,2,1,1,1,2,2,1,3,1,1,1,2,1,1,2,1,1,2,1,1,1,3,3,2,1,2,2,2,2,1,2,1,2,2,2,1,2,2,1,3,2,1,3,1,2,3,2,2,1,2,2,2,1,2,3,3,2,2,2,1,2,2,3,1,1,1,2,1,2,2,1,3,1,1,1,2,3,1,1,2,2,2,2,2,2,3,2,3,2,2,3,1,2,2,2,2,1,2,3,2,2,2,3,3,3,3,3,3,3,2,3,1,1,1,3,2,2,1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,2,3,3,3,1,3,3,2,1,2,2,2,3,2,2,2,2,2,1,2,2,1,3,2,1,2,2,2,3,2,3,1,2,2,3,1,2,2,2,2,3,1,3,1,3,3,3,3,3,3,3,1,2,2,3,1,3,3,2,2,3,2,2,3,3,3,3,2,3,3,3,2,3,2,1,3,3,3,1,2,2,3,2,3,3,1,1,3,2,3,3,2,3,3,3,2,2,3,3,3,3,3,3,2,3,1,3,3],"breast":["left","right","left","right","right","left","left","left","left","right","left","left","left","left","left","left","left","left","left","right","left","left","right","left","right","left","left","right","right","left","right","right","left","right","left","left","left","right","left","left","right","left","left","left","right","left","right","right","right","right","left","left","left","left","right","right","right","right","left","right","left","right","left","right","left","right","right","left","left","left","left","right","left","right","left","left","left","left","left","right","right","left","right","right","left","left","right","left","right","right","right","left","right","right","left","right","left","right","left","left","left","right","right","left","right","right","left","right","right","right","left","right","right","right","right","right","left","left","right","left","left","right","left","right","right","left","right","right","left","right","right","right","left","left","left","right","right","left","left","left","left","left","left","left","left","left","right","left","left","right","right","left","left","right","right","right","right","left","right","left","right","right","right","right","right","right","right","right","right","left","right","left","right","right","left","right","left","left","right","right","right","right","right","left","left","right","left","left","right","right","right","left","left","left","right","left","right","left","left","left","right","left","left","left","left","right","left","left","left","right","left","right","right","right","right","right","left","left","right","right","left","right","left","right","left","right","left","right","right","right","right","right","right","left","right","left","right","right","left","right","left","left","left","right","left","right","left","left","left","left","left","right","left","right","right","right","left","left","left","right","right","left","left","left","left","left","left","left","left","left","left","right","right","right","left","right","left","left","right","left","left","left","left","right","left","left"],"breast_quad":["left_low","right_up","left_low","left_up","right_low","left_low","left_low","left_low","left_low","left_up","central","left_low","right_up","right_up","left_up","left_low","left_low","left_low","left_low","right_up","left_low","left_low","left_low","left_up","left_up","left_up","left_low","left_up","left_low","left_low","left_up","left_low","left_low","left_up","left_up","left_up","central","central","left_low","left_low","left_low","left_low","central","left_up","right_up","left_up","left_low","left_up","right_up","left_low","left_low","right_low","left_low","left_up","left_up","right_up","central","right_up","left_up","left_up","central","right_low","left_low","right_up","right_low","left_up","right_low","left_up","left_low","left_low","left_low","left_up","left_up","right_low","right_low","left_low","left_low","central","left_low","central","left_low","left_up","left_low","left_low","right_low","left_up","left_low","right_low","left_up","left_up","central","left_up","left_up","left_up","left_low","right_low","left_up","left_up","right_up","left_low","left_low","left_low","right_low","right_low","left_low","left_up","left_up","right_up","right_up","left_up","left_low","central","left_up","left_up","right_up","left_up","left_low","left_up","left_low","right_low","left_low","right_up","left_up","left_low","left_low","central","right_up","left_up","left_up","left_up","right_up","left_up","left_up","right_up","left_low","central","right_up","left_low","left_low","right_low","left_low","left_low","left_up","left_low","central","right_low","left_up","left_low","central","left_up","left_up","left_low","left_low","left_up","left_up","left_up","left_up","central","central","left_low","left_up","left_low","left_up","left_up","left_low","left_up","left_low","left_up","left_up","left_up","left_up","left_low","right_up","left_up","left_low","right_up","left_low","left_low","left_up","left_low","left_up","left_low","left_low","left_up","left_low","left_low","right_low","left_up","left_up","left_up","right_low","left_up","left_low","right_low","left_up","left_up","left_up","left_low","central","left_low","left_low","left_low","left_low","left_low","right_up","central","?","right_up","right_up","left_up","left_low","central","right_up","left_up","left_low","left_up","left_up","left_up","central","left_low","right_up","left_up","right_low","left_low","left_low","left_low","left_low","left_up","left_low","right_up","left_up","left_up","left_up","left_low","left_up","left_low","left_low","left_low","left_low","right_up","left_low","left_low","left_low","right_up","left_up","left_up","left_low","right_low","left_low","left_low","left_up","left_low","left_up","left_up","right_up","left_up","left_low","left_low","right_low","left_up","right_up","right_low","left_up","left_up","left_low","left_low","right_up","left_low","left_low","left_low","right_low","left_low","left_up","right_up","central","left_up","right_low","left_up","right_up","left_low","left_low","left_up","left_up","left_up","left_low","left_low"],"irradiat":["no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","yes","no","yes","yes","yes","no","no","yes","no","yes","yes","yes","no","no","no","no","yes","no","yes","yes","yes","no","no","no","no","no","yes","no","yes","no","no","no","no","yes","no","yes","yes","yes","no","no","yes","no","yes","yes","no","no","no","yes","yes","no","no","yes","yes","yes","yes","yes","yes","yes","yes","no","yes","no","no","yes","yes","no","no","yes","no","no","yes","yes","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","yes","no","yes","yes","no","yes","no","yes","no","no","yes","yes","yes","yes","no","no","no","yes","yes","no","yes","no","yes","yes","yes","yes","no","no","no","yes","no","no","no","no","yes","yes","yes","no","no","yes","no","no","no","no","no","yes","no","yes","no","yes","no","yes","yes","no","yes","yes","no","yes","yes","no","yes","no","no","no"]},"columns":[{"id":"class","name":"class","type":"character"},{"id":"age","name":"age","type":"character"},{"id":"menopause","name":"menopause","type":"character"},{"id":"tumor_size","name":"tumor_size","type":"character"},{"id":"inv_nodes","name":"inv_nodes","type":"character"},{"id":"node_caps","name":"node_caps","type":"character"},{"id":"deg_malig","name":"deg_malig","type":"numeric"},{"id":"breast","name":"breast","type":"character"},{"id":"breast_quad","name":"breast_quad","type":"character"},{"id":"irradiat","name":"irradiat","type":"character"}],"filterable":true,"defaultPageSize":5,"bordered":true,"compact":true,"dataKey":"f284d7489c3aaf77b60723e7d9dcc331"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="data-wrangling" class="section level3">
<h3>Data Wrangling</h3>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="id_05.html#cb32-1" tabindex="-1"></a><span class="fu">str</span>(bcData)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    286 obs. of  10 variables:
##  $ class      : chr  &quot;no-recurrence-events&quot; &quot;no-recurrence-events&quot; &quot;no-recurrence-events&quot; &quot;no-recurrence-events&quot; ...
##  $ age        : chr  &quot;30-39&quot; &quot;40-49&quot; &quot;40-49&quot; &quot;60-69&quot; ...
##  $ menopause  : chr  &quot;premeno&quot; &quot;premeno&quot; &quot;premeno&quot; &quot;ge40&quot; ...
##  $ tumor_size : chr  &quot;30-34&quot; &quot;20-24&quot; &quot;20-24&quot; &quot;15-19&quot; ...
##  $ inv_nodes  : chr  &quot;0-2&quot; &quot;0-2&quot; &quot;0-2&quot; &quot;0-2&quot; ...
##  $ node_caps  : chr  &quot;no&quot; &quot;no&quot; &quot;no&quot; &quot;no&quot; ...
##  $ deg_malig  : int  3 2 2 2 2 2 2 1 2 2 ...
##  $ breast     : chr  &quot;left&quot; &quot;right&quot; &quot;left&quot; &quot;right&quot; ...
##  $ breast_quad: chr  &quot;left_low&quot; &quot;right_up&quot; &quot;left_low&quot; &quot;left_up&quot; ...
##  $ irradiat   : chr  &quot;no&quot; &quot;no&quot; &quot;no&quot; &quot;no&quot; ...</code></pre>
<!-- degree of malignancy is deg-malig -->
<p>The breast cancer dataset had 10 columns and 286 rows. The next step was correcting the variable types to factors and renaming non-recurrence-events to NRE and recurrence events to RE.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="id_05.html#cb34-1" tabindex="-1"></a><span class="co"># changing type to factor</span></span>
<span id="cb34-2"><a href="id_05.html#cb34-2" tabindex="-1"></a>bcData<span class="sc">$</span>class <span class="ot">&lt;-</span> <span class="fu">factor</span>(bcData<span class="sc">$</span>class, <span class="at">levels =</span> <span class="fu">unique</span>(bcData<span class="sc">$</span>class))</span>
<span id="cb34-3"><a href="id_05.html#cb34-3" tabindex="-1"></a>bcData<span class="sc">$</span>age <span class="ot">&lt;-</span> <span class="fu">factor</span>(bcData<span class="sc">$</span>age, <span class="at">levels =</span> <span class="fu">unique</span>(bcData<span class="sc">$</span>age))</span>
<span id="cb34-4"><a href="id_05.html#cb34-4" tabindex="-1"></a>bcData<span class="sc">$</span>menopause <span class="ot">&lt;-</span> <span class="fu">factor</span>(bcData<span class="sc">$</span>menopause, <span class="at">levels =</span> <span class="fu">unique</span>(bcData<span class="sc">$</span>menopause))</span>
<span id="cb34-5"><a href="id_05.html#cb34-5" tabindex="-1"></a>bcData<span class="sc">$</span>tumor_size <span class="ot">&lt;-</span> <span class="fu">factor</span>(bcData<span class="sc">$</span>tumor_size, <span class="at">levels =</span> <span class="fu">unique</span>(bcData<span class="sc">$</span>tumor_size))</span>
<span id="cb34-6"><a href="id_05.html#cb34-6" tabindex="-1"></a>bcData<span class="sc">$</span>inv_nodes <span class="ot">&lt;-</span> <span class="fu">factor</span>(bcData<span class="sc">$</span>inv_nodes, <span class="at">levels =</span> <span class="fu">unique</span>(bcData<span class="sc">$</span>inv_nodes))</span>
<span id="cb34-7"><a href="id_05.html#cb34-7" tabindex="-1"></a>bcData<span class="sc">$</span>node_caps <span class="ot">&lt;-</span> <span class="fu">factor</span>(bcData<span class="sc">$</span>node_caps, <span class="at">levels =</span> <span class="fu">unique</span>(bcData<span class="sc">$</span>node_caps))</span>
<span id="cb34-8"><a href="id_05.html#cb34-8" tabindex="-1"></a>bcData<span class="sc">$</span>deg_malig <span class="ot">&lt;-</span> <span class="fu">factor</span>(bcData<span class="sc">$</span>deg_malig, <span class="at">levels =</span> <span class="fu">unique</span>(bcData<span class="sc">$</span>deg_malig))</span>
<span id="cb34-9"><a href="id_05.html#cb34-9" tabindex="-1"></a>bcData<span class="sc">$</span>breast <span class="ot">&lt;-</span> <span class="fu">factor</span>(bcData<span class="sc">$</span>breast, <span class="at">levels =</span> <span class="fu">unique</span>(bcData<span class="sc">$</span>breast))</span>
<span id="cb34-10"><a href="id_05.html#cb34-10" tabindex="-1"></a>bcData<span class="sc">$</span>breast_quad <span class="ot">&lt;-</span> <span class="fu">factor</span>(bcData<span class="sc">$</span>breast_quad, <span class="at">levels =</span> <span class="fu">unique</span>(bcData<span class="sc">$</span>breast_quad))</span>
<span id="cb34-11"><a href="id_05.html#cb34-11" tabindex="-1"></a>bcData<span class="sc">$</span>irradiat <span class="ot">&lt;-</span> <span class="fu">factor</span>(bcData<span class="sc">$</span>irradiat, <span class="at">levels =</span> <span class="fu">unique</span>(bcData<span class="sc">$</span>irradiat))</span>
<span id="cb34-12"><a href="id_05.html#cb34-12" tabindex="-1"></a></span>
<span id="cb34-13"><a href="id_05.html#cb34-13" tabindex="-1"></a><span class="co"># renaming values in class column</span></span>
<span id="cb34-14"><a href="id_05.html#cb34-14" tabindex="-1"></a>bcData<span class="sc">$</span>class <span class="ot">&lt;-</span> <span class="fu">factor</span>(bcData<span class="sc">$</span>class, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;no-recurrence-events&quot;</span>, <span class="st">&quot;recurrence-events&quot;</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;NRE&quot;</span>, <span class="st">&quot;RE&quot;</span>))</span>
<span id="cb34-15"><a href="id_05.html#cb34-15" tabindex="-1"></a></span>
<span id="cb34-16"><a href="id_05.html#cb34-16" tabindex="-1"></a><span class="co"># using str to inspect the changed variables</span></span>
<span id="cb34-17"><a href="id_05.html#cb34-17" tabindex="-1"></a><span class="fu">str</span>(bcData)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    286 obs. of  10 variables:
##  $ class      : Factor w/ 2 levels &quot;NRE&quot;,&quot;RE&quot;: 1 1 1 1 1 1 1 1 1 1 ...
##  $ age        : Factor w/ 6 levels &quot;30-39&quot;,&quot;40-49&quot;,..: 1 2 2 3 2 3 4 3 2 2 ...
##  $ menopause  : Factor w/ 3 levels &quot;premeno&quot;,&quot;ge40&quot;,..: 1 1 1 2 1 2 1 2 1 1 ...
##  $ tumor_size : Factor w/ 11 levels &quot;30-34&quot;,&quot;20-24&quot;,..: 1 2 2 3 4 3 5 2 6 2 ...
##  $ inv_nodes  : Factor w/ 7 levels &quot;0-2&quot;,&quot;6-8&quot;,&quot;9-11&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...
##  $ node_caps  : Factor w/ 3 levels &quot;no&quot;,&quot;yes&quot;,&quot;?&quot;: 1 1 1 1 1 1 1 1 1 1 ...
##  $ deg_malig  : Factor w/ 3 levels &quot;3&quot;,&quot;2&quot;,&quot;1&quot;: 1 2 2 2 2 2 2 3 2 2 ...
##  $ breast     : Factor w/ 2 levels &quot;left&quot;,&quot;right&quot;: 1 2 1 2 2 1 1 1 1 2 ...
##  $ breast_quad: Factor w/ 6 levels &quot;left_low&quot;,&quot;right_up&quot;,..: 1 2 1 3 4 1 1 1 1 3 ...
##  $ irradiat   : Factor w/ 2 levels &quot;no&quot;,&quot;yes&quot;: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
</div>
<div id="splitting-the-data" class="section level3">
<h3>Splitting the data</h3>
<p>After checking the variables the data must be split into a training set and a test set. The test set must be different from the training set to avoid the model from overfitting. Overfitting means that the machine learning model is too well trained on memorizing its own training data that it can not accurately predict data outside of its training data. There are many ways to prevent overfitting. Examples are early stopping, feature selecting by excluding irralevent columns from the dataset, using more data to train on, data augmentation by adding noisy data within the dataset, Regularization by giving a penalty to parameters with large coefficients, ensamble methods by creating random samples in the training set to train them individually. This however comes with its own downside as this might cause underfitting. Underfitting is a term used when the model is not trained well enough on the training data to make accurate predictions outside of the training data. <span class="citation"><span>“What Is <span>Overfitting</span>? <span></span> <span>IBM</span>”</span> (2021)</span>; <span class="citation"><span>“Tidymodels - <span>Welcome</span>!”</span> (n.d.)</span></p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="id_05.html#cb36-1" tabindex="-1"></a><span class="co"># split data</span></span>
<span id="cb36-2"><a href="id_05.html#cb36-2" tabindex="-1"></a><span class="fu">library</span>(tidymodels)</span>
<span id="cb36-3"><a href="id_05.html#cb36-3" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">2024</span>)</span>
<span id="cb36-4"><a href="id_05.html#cb36-4" tabindex="-1"></a>bcData_split <span class="ot">&lt;-</span> <span class="fu">initial_split</span>(bcData, <span class="at">prop =</span> <span class="fl">0.7</span>, <span class="at">strata =</span> class)</span></code></pre></div>
<p>The data gets split randomly so for the sake of reproducibility a seed is set. The function initial_split takes in the breast cancer dataset. Prop is used to specify the data to be split into 70% training data and 30% test data. Strata ensures that even though the data is split randomly both the training and test set will have the roughly the same percentage of no recurrence events and recurrence events. <span class="citation"><span>“Tidymodels - <span>Welcome</span>!”</span> (n.d.)</span></p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="id_05.html#cb37-1" tabindex="-1"></a><span class="co"># store data into training and testing</span></span>
<span id="cb37-2"><a href="id_05.html#cb37-2" tabindex="-1"></a>bcData_train <span class="ot">&lt;-</span> <span class="fu">training</span>(bcData_split)</span>
<span id="cb37-3"><a href="id_05.html#cb37-3" tabindex="-1"></a>bcData_test  <span class="ot">&lt;-</span> <span class="fu">testing</span>(bcData_split)</span></code></pre></div>
<p>Using the training and testing functions both the training and test set are stored in variables.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="id_05.html#cb38-1" tabindex="-1"></a><span class="co"># checking the split</span></span>
<span id="cb38-2"><a href="id_05.html#cb38-2" tabindex="-1"></a><span class="fu">nrow</span>(bcData_train)<span class="sc">/</span><span class="fu">nrow</span>(bcData)</span></code></pre></div>
<pre><code>## [1] 0.6958042</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="id_05.html#cb40-1" tabindex="-1"></a><span class="co"># checking the equal proportions created by strata</span></span>
<span id="cb40-2"><a href="id_05.html#cb40-2" tabindex="-1"></a>bcData_train <span class="sc">%&gt;%</span> </span>
<span id="cb40-3"><a href="id_05.html#cb40-3" tabindex="-1"></a>  <span class="fu">count</span>(class) <span class="sc">%&gt;%</span> </span>
<span id="cb40-4"><a href="id_05.html#cb40-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prop =</span> n<span class="sc">/</span><span class="fu">sum</span>(n))</span></code></pre></div>
<pre><code>##   class   n      prop
## 1   NRE 140 0.7035176
## 2    RE  59 0.2964824</code></pre>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="id_05.html#cb42-1" tabindex="-1"></a><span class="co"># checking the equal proportions created by strata</span></span>
<span id="cb42-2"><a href="id_05.html#cb42-2" tabindex="-1"></a>bcData_test <span class="sc">%&gt;%</span> </span>
<span id="cb42-3"><a href="id_05.html#cb42-3" tabindex="-1"></a>  <span class="fu">count</span>(class) <span class="sc">%&gt;%</span> </span>
<span id="cb42-4"><a href="id_05.html#cb42-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prop =</span> n<span class="sc">/</span><span class="fu">sum</span>(n))</span></code></pre></div>
<pre><code>##   class  n      prop
## 1   NRE 61 0.7011494
## 2    RE 26 0.2988506</code></pre>
<p>Above results shows that as expected the dataset is split 70% to 30% and the strata function has made sure the proportions of no recurrence events and recurrence events are nearly equal in both the training and test set.</p>
</div>
<div id="resampling-the-random-forest-model" class="section level3">
<h3>Resampling the random forest model</h3>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="id_05.html#cb44-1" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(here<span class="sc">::</span><span class="fu">here</span>(</span>
<span id="cb44-2"><a href="id_05.html#cb44-2" tabindex="-1"></a>  <span class="st">&quot;data&quot;</span>,</span>
<span id="cb44-3"><a href="id_05.html#cb44-3" tabindex="-1"></a>  <span class="st">&quot;resampling.png&quot;</span></span>
<span id="cb44-4"><a href="id_05.html#cb44-4" tabindex="-1"></a>))</span></code></pre></div>
<p><img src="data/resampling.png" width="394" /></p>
<p>Resampling will be used for evaluation of models. The data itself is split by using initial split. The training data is then split again into analysis and assesment groups. There are more ways to evaluate a model like cross-validation or bootstrapping. In this case cross-validation will be used. Cross-validation divides the training data in folds of around equal size. The first fold is the assessment fold and all other folds are analysis folds. While training each independent fold will be evaluated with the first assessment fold to predict its performance. <span class="citation"><span>“Tidymodels - <span>Welcome</span>!”</span> (n.d.)</span></p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="id_05.html#cb45-1" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">111</span>)</span>
<span id="cb45-2"><a href="id_05.html#cb45-2" tabindex="-1"></a>folds <span class="ot">&lt;-</span> <span class="fu">vfold_cv</span>(bcData_train, <span class="at">v =</span> <span class="dv">15</span>, <span class="at">strata =</span> class) </span>
<span id="cb45-3"><a href="id_05.html#cb45-3" tabindex="-1"></a>folds</span></code></pre></div>
<pre><code>## #  15-fold cross-validation using stratification 
## # A tibble: 15 × 2
##    splits           id    
##    &lt;list&gt;           &lt;chr&gt; 
##  1 &lt;split [185/14]&gt; Fold01
##  2 &lt;split [185/14]&gt; Fold02
##  3 &lt;split [185/14]&gt; Fold03
##  4 &lt;split [185/14]&gt; Fold04
##  5 &lt;split [185/14]&gt; Fold05
##  6 &lt;split [186/13]&gt; Fold06
##  7 &lt;split [186/13]&gt; Fold07
##  8 &lt;split [186/13]&gt; Fold08
##  9 &lt;split [186/13]&gt; Fold09
## 10 &lt;split [186/13]&gt; Fold10
## 11 &lt;split [186/13]&gt; Fold11
## 12 &lt;split [186/13]&gt; Fold12
## 13 &lt;split [186/13]&gt; Fold13
## 14 &lt;split [186/13]&gt; Fold14
## 15 &lt;split [187/12]&gt; Fold15</code></pre>
<p>The vfold_cv function is used to create folds. Again a strata is used to distribute the no recurrence events and recurrence events equally over the folds.</p>
</div>
<div id="creating-a-random-forest-model-using-ranger" class="section level3">
<h3>Creating a random forest model using Ranger</h3>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="id_05.html#cb47-1" tabindex="-1"></a><span class="fu">show_engines</span>(<span class="st">&quot;rand_forest&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 2
##   engine       mode          
##   &lt;chr&gt;        &lt;chr&gt;         
## 1 ranger       classification
## 2 ranger       regression    
## 3 randomForest classification
## 4 randomForest regression    
## 5 spark        classification
## 6 spark        regression</code></pre>
<p>There are a lot of engines to use for machine learning with tidymodels. A list of engines can be found <a href="https://www.tidymodels.org/find/parsnip/">here</a>.Different engines use a different way of computing the data. Random forest algorithms try to narrow the data by asking questions about features such as is the age 15-19 or combine different features like age and degree of malignancy. These questions create a decision tree. Multiple decision trees combined makes up a forest. The questions get more specific the further in the decision tree you get. The questions itself are chosen based on the patterns in the dataset. The trained model then uses these same questions on new data sets such as the test set to predict in this case if its a no recurrence event or recurrence event. <span class="citation"><span>“What <span>Is Random Forest</span>? <span></span> <span>IBM</span>”</span> (2021)</span>; <span class="citation"><span>“Tidymodels - <span>Welcome</span>!”</span> (n.d.)</span></p>
<p>An ensemble technique called bagging (aka bootstrap aggregating) is often used to reduce variance in a dataset. The random forest algorithm uses this technique to improve its accuracy. The way bagging works is it makes multiple sample sets out of the training data. These sample sets can use the same values. Each sample is then trained independently and the results are combined to make a final more accurate prediction based on the averages of the trained samples. <span class="citation"><span>“What <span>Is Random Forest</span>? <span></span> <span>IBM</span>”</span> (2021)</span>; <span class="citation"><span>“Tidymodels - <span>Welcome</span>!”</span> (n.d.)</span></p>
<p>The random forest algorithm takes in three main hyperparameters: node size, number of trees and features sampled. If the number of values after a split in a tree drops below the node size then the tree will not split anymore. The number of trees specifies how many decision trees are combined to create the forest. The features sampled specifies which features (like age and degree of malignancy) will be taken into account for training the model. <span class="citation"><span>“What <span>Is Random Forest</span>? <span></span> <span>IBM</span>”</span> (2021)</span>; <span class="citation"><span>“Tidymodels - <span>Welcome</span>!”</span> (n.d.)</span>; <span class="citation">Simone (2015)</span></p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="id_05.html#cb49-1" tabindex="-1"></a><span class="co"># show available cores</span></span>
<span id="cb49-2"><a href="id_05.html#cb49-2" tabindex="-1"></a>cores <span class="ot">&lt;-</span> parallel<span class="sc">::</span><span class="fu">detectCores</span>()</span>
<span id="cb49-3"><a href="id_05.html#cb49-3" tabindex="-1"></a>cores</span></code></pre></div>
<pre><code>## [1] 12</code></pre>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="id_05.html#cb51-1" tabindex="-1"></a><span class="co"># train the model</span></span>
<span id="cb51-2"><a href="id_05.html#cb51-2" tabindex="-1"></a>bcData_rf_ranger_mod <span class="ot">&lt;-</span> <span class="fu">rand_forest</span>(</span>
<span id="cb51-3"><a href="id_05.html#cb51-3" tabindex="-1"></a>  <span class="at">mode =</span> <span class="st">&quot;classification&quot;</span>, <span class="co"># the type of analysis: classification, regression, etc</span></span>
<span id="cb51-4"><a href="id_05.html#cb51-4" tabindex="-1"></a>  <span class="at">mtry =</span> <span class="fu">tune</span>(), <span class="co"># amount of features per decision tree</span></span>
<span id="cb51-5"><a href="id_05.html#cb51-5" tabindex="-1"></a>  <span class="at">trees =</span> <span class="fu">tune</span>(), <span class="co"># number of trees</span></span>
<span id="cb51-6"><a href="id_05.html#cb51-6" tabindex="-1"></a>  <span class="at">min_n =</span> <span class="fu">tune</span>(), <span class="co"># minimal node size</span></span>
<span id="cb51-7"><a href="id_05.html#cb51-7" tabindex="-1"></a>) <span class="sc">%&gt;%</span>  <span class="fu">set_engine</span>(<span class="st">&quot;ranger&quot;</span>, <span class="at">num.threads =</span> cores <span class="sc">-</span> <span class="dv">1</span>, <span class="at">importance =</span> <span class="st">&quot;impurity&quot;</span>)</span>
<span id="cb51-8"><a href="id_05.html#cb51-8" tabindex="-1"></a><span class="co"># using the ranger engine</span></span>
<span id="cb51-9"><a href="id_05.html#cb51-9" tabindex="-1"></a><span class="co"># using all available cores except 1 </span></span>
<span id="cb51-10"><a href="id_05.html#cb51-10" tabindex="-1"></a><span class="co"># so that other smaller processes on the computer still run</span></span></code></pre></div>
<p>The random forest model is created using the rand_forest function. The mode is set to classification because the result is either a recurrence event or non recurrence event (another mode could be regression for example, which depends on the variable types within the dataset). The mtry (max features per decision tree) is set to tune() which means the random forest algorithm will try different mtry values to find the best performing value. Both the number of trees and the minimal node size are also set to tune(). The engine chosen is ranger. All cores except 1 are used for training the model. This computer has 12 cores so 11` will be used to train the model. By setting importance = “impurity” the most important decisions in the forest model are stored for visualization later on. <span class="citation"><span>“Tidymodels - <span>Welcome</span>!”</span> (n.d.)</span></p>
</div>
<div id="tuning-and-training-the-randomforest-engine" class="section level3">
<h3>Tuning and training the randomForest engine</h3>
<p>The random forest algorithm must know which features to use to predict the class. To tell the algorithm this a recipe must be made.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="id_05.html#cb52-1" tabindex="-1"></a>bcData_rf_rec <span class="ot">&lt;-</span> <span class="fu">recipe</span>(class <span class="sc">~</span> ., <span class="at">data =</span> bcData_train) <span class="sc">%&gt;%</span> </span>
<span id="cb52-2"><a href="id_05.html#cb52-2" tabindex="-1"></a>  <span class="fu">step_zv</span>(<span class="fu">all_predictors</span>())</span></code></pre></div>
<p>The recipe contains a formula describing the to be predicted feature and the features to use for the prediction. In this case class is the feature to predict and all other features (indicated by the dot after the tilde) are used to predict the class. step_zv() is used to remove features in the training set that only show the same value (for example if all rows had age 15-19). These features are not useful and could only cause overfitting. With regression data “step_dummy()” must be used to convert categorical data to numerical data by making it like binary. In this case we don’t need it, because the breast cancer dataset is based on classification data. <span class="citation"><span>“Tidymodels - <span>Welcome</span>!”</span> (n.d.)</span></p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="id_05.html#cb53-1" tabindex="-1"></a><span class="co"># combining model and recipe into a workflow</span></span>
<span id="cb53-2"><a href="id_05.html#cb53-2" tabindex="-1"></a>bcData_ranger_rf_workflow <span class="ot">&lt;-</span> <span class="fu">workflow</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb53-3"><a href="id_05.html#cb53-3" tabindex="-1"></a>  <span class="fu">add_model</span>(bcData_rf_ranger_mod) <span class="sc">%&gt;%</span></span>
<span id="cb53-4"><a href="id_05.html#cb53-4" tabindex="-1"></a>  <span class="fu">add_recipe</span>(bcData_rf_rec)</span></code></pre></div>
<p>A workflow is created to combine the model with the recipe. After which the model will be tuned.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="id_05.html#cb54-1" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">777</span>)</span>
<span id="cb54-2"><a href="id_05.html#cb54-2" tabindex="-1"></a></span>
<span id="cb54-3"><a href="id_05.html#cb54-3" tabindex="-1"></a><span class="co"># tune the model</span></span>
<span id="cb54-4"><a href="id_05.html#cb54-4" tabindex="-1"></a>bcData_ranger_lr_res <span class="ot">&lt;-</span> </span>
<span id="cb54-5"><a href="id_05.html#cb54-5" tabindex="-1"></a>  bcData_ranger_rf_workflow <span class="sc">%&gt;%</span> </span>
<span id="cb54-6"><a href="id_05.html#cb54-6" tabindex="-1"></a>  <span class="fu">tune_grid</span>(<span class="at">resamples =</span> folds,</span>
<span id="cb54-7"><a href="id_05.html#cb54-7" tabindex="-1"></a>            <span class="at">grid =</span> <span class="dv">50</span>,</span>
<span id="cb54-8"><a href="id_05.html#cb54-8" tabindex="-1"></a>            <span class="at">control =</span> <span class="fu">control_grid</span>(<span class="at">save_pred =</span> <span class="cn">TRUE</span>),</span>
<span id="cb54-9"><a href="id_05.html#cb54-9" tabindex="-1"></a>            <span class="at">metrics =</span> <span class="fu">metric_set</span>(roc_auc, accuracy))</span>
<span id="cb54-10"><a href="id_05.html#cb54-10" tabindex="-1"></a>bcData_ranger_lr_res</span></code></pre></div>
<pre><code>## # Tuning results
## # 15-fold cross-validation using stratification 
## # A tibble: 15 × 5
##    splits           id     .metrics           .notes           .predictions
##    &lt;list&gt;           &lt;chr&gt;  &lt;list&gt;             &lt;list&gt;           &lt;list&gt;      
##  1 &lt;split [185/14]&gt; Fold01 &lt;tibble [100 × 7]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
##  2 &lt;split [185/14]&gt; Fold02 &lt;tibble [100 × 7]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
##  3 &lt;split [185/14]&gt; Fold03 &lt;tibble [100 × 7]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
##  4 &lt;split [185/14]&gt; Fold04 &lt;tibble [100 × 7]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
##  5 &lt;split [185/14]&gt; Fold05 &lt;tibble [100 × 7]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
##  6 &lt;split [186/13]&gt; Fold06 &lt;tibble [100 × 7]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
##  7 &lt;split [186/13]&gt; Fold07 &lt;tibble [100 × 7]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
##  8 &lt;split [186/13]&gt; Fold08 &lt;tibble [100 × 7]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
##  9 &lt;split [186/13]&gt; Fold09 &lt;tibble [100 × 7]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
## 10 &lt;split [186/13]&gt; Fold10 &lt;tibble [100 × 7]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
## 11 &lt;split [186/13]&gt; Fold11 &lt;tibble [100 × 7]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
## 12 &lt;split [186/13]&gt; Fold12 &lt;tibble [100 × 7]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
## 13 &lt;split [186/13]&gt; Fold13 &lt;tibble [100 × 7]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
## 14 &lt;split [186/13]&gt; Fold14 &lt;tibble [100 × 7]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
## 15 &lt;split [187/12]&gt; Fold15 &lt;tibble [100 × 7]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;</code></pre>
<p>To tune the model a grid is needed. The grid could be made manually, but the function tune_grid directly makes the grid and tunes it. The resamples parameter is set to indicate that we’re using the resample folds from earlier. The grid parameter is set to 50 which means 50 models will be created with different combinations of hyperparameters. The control_grid parameter is set to save the predictions. The metrics parameter saves the roc_auc and accuracy results. <span class="citation"><span>“Tidymodels - <span>Welcome</span>!”</span> (n.d.)</span></p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="id_05.html#cb56-1" tabindex="-1"></a><span class="fu">autoplot</span>(bcData_ranger_lr_res)</span></code></pre></div>
<p><img src="_main_files/figure-html/plot%20the%20tuned%20results-1.png" width="672" /></p>
<p>Autoplot is used to show the effect of the hyperparameters on the accuracy and roc_auc results.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="id_05.html#cb57-1" tabindex="-1"></a><span class="co"># mtry + min_n</span></span>
<span id="cb57-2"><a href="id_05.html#cb57-2" tabindex="-1"></a>bcData_ranger_lr_res <span class="sc">%&gt;%</span></span>
<span id="cb57-3"><a href="id_05.html#cb57-3" tabindex="-1"></a>  <span class="fu">collect_metrics</span>() <span class="sc">%&gt;%</span></span>
<span id="cb57-4"><a href="id_05.html#cb57-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mtry =</span> <span class="fu">factor</span>(mtry)) <span class="sc">%&gt;%</span></span>
<span id="cb57-5"><a href="id_05.html#cb57-5" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(min_n, mean, <span class="at">color =</span> mtry)) <span class="sc">+</span></span>
<span id="cb57-6"><a href="id_05.html#cb57-6" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">1.5</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb57-7"><a href="id_05.html#cb57-7" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb57-8"><a href="id_05.html#cb57-8" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> .metric, <span class="at">scales =</span> <span class="st">&quot;free&quot;</span>, <span class="at">nrow =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb57-9"><a href="id_05.html#cb57-9" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_number</span>()) <span class="sc">+</span></span>
<span id="cb57-10"><a href="id_05.html#cb57-10" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>(<span class="at">option =</span> <span class="st">&quot;plasma&quot;</span>, <span class="at">begin =</span> .<span class="dv">9</span>, <span class="at">end =</span> <span class="dv">0</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/plot%20mtry%20and%20min_n-1.png" width="672" /></p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="id_05.html#cb58-1" tabindex="-1"></a><span class="co"># mtry + trees</span></span>
<span id="cb58-2"><a href="id_05.html#cb58-2" tabindex="-1"></a>bcData_ranger_lr_res <span class="sc">%&gt;%</span></span>
<span id="cb58-3"><a href="id_05.html#cb58-3" tabindex="-1"></a>  <span class="fu">collect_metrics</span>() <span class="sc">%&gt;%</span></span>
<span id="cb58-4"><a href="id_05.html#cb58-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mtry =</span> <span class="fu">factor</span>(mtry)) <span class="sc">%&gt;%</span></span>
<span id="cb58-5"><a href="id_05.html#cb58-5" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(trees, mean, <span class="at">color =</span> mtry)) <span class="sc">+</span></span>
<span id="cb58-6"><a href="id_05.html#cb58-6" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">1.5</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb58-7"><a href="id_05.html#cb58-7" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb58-8"><a href="id_05.html#cb58-8" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> .metric, <span class="at">scales =</span> <span class="st">&quot;free&quot;</span>, <span class="at">nrow =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb58-9"><a href="id_05.html#cb58-9" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_number</span>()) <span class="sc">+</span></span>
<span id="cb58-10"><a href="id_05.html#cb58-10" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>(<span class="at">option =</span> <span class="st">&quot;plasma&quot;</span>, <span class="at">begin =</span> .<span class="dv">9</span>, <span class="at">end =</span> <span class="dv">0</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/plot%20mtry%20and%20trees-1.png" width="672" /></p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="id_05.html#cb59-1" tabindex="-1"></a><span class="co"># min_n + trees</span></span>
<span id="cb59-2"><a href="id_05.html#cb59-2" tabindex="-1"></a>bcData_ranger_lr_res <span class="sc">%&gt;%</span></span>
<span id="cb59-3"><a href="id_05.html#cb59-3" tabindex="-1"></a>  <span class="fu">collect_metrics</span>() <span class="sc">%&gt;%</span></span>
<span id="cb59-4"><a href="id_05.html#cb59-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">min_n =</span> <span class="fu">factor</span>(min_n)) <span class="sc">%&gt;%</span></span>
<span id="cb59-5"><a href="id_05.html#cb59-5" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(trees, mean, <span class="at">color =</span> min_n)) <span class="sc">+</span></span>
<span id="cb59-6"><a href="id_05.html#cb59-6" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">1.5</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb59-7"><a href="id_05.html#cb59-7" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb59-8"><a href="id_05.html#cb59-8" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> .metric, <span class="at">scales =</span> <span class="st">&quot;free&quot;</span>, <span class="at">nrow =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb59-9"><a href="id_05.html#cb59-9" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_number</span>()) <span class="sc">+</span></span>
<span id="cb59-10"><a href="id_05.html#cb59-10" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>(<span class="at">option =</span> <span class="st">&quot;plasma&quot;</span>, <span class="at">begin =</span> .<span class="dv">9</span>, <span class="at">end =</span> <span class="dv">0</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/plot%20min_n%20+%20trees-1.png" width="672" /></p>
<p>The figures above show the correlation between the hyperparameters and the metrics. The first figure shows the correlation between the mtry and min_n hyperparameters. The second figure shows the correlation between the mtry and trees hyperparameters. The third figure shows the correlation between the min_n and trees hyperparameters. The Y axis shows the mean of the metric and the X axis and colors show the hyperparameters. These figures can be used to see how certain parameters affect each other. For example mtry might have a really high mean, but a low mean when combined with a certain value of min_n. It also shows that the models tend to have the best performance with a mtry of 1 and a higher min_n.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="id_05.html#cb60-1" tabindex="-1"></a>bcData_ranger_best_trees <span class="ot">&lt;-</span> bcData_ranger_lr_res <span class="sc">%&gt;%</span></span>
<span id="cb60-2"><a href="id_05.html#cb60-2" tabindex="-1"></a>  <span class="fu">show_best</span>(<span class="at">metric =</span> <span class="st">&quot;accuracy&quot;</span>)</span>
<span id="cb60-3"><a href="id_05.html#cb60-3" tabindex="-1"></a>bcData_ranger_best_trees</span></code></pre></div>
<pre><code>## # A tibble: 5 × 9
##    mtry trees min_n .metric  .estimator  mean     n std_err .config             
##   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;               
## 1     1  1877    10 accuracy binary     0.729    15  0.0154 Preprocessor1_Model…
## 2     1   833    10 accuracy binary     0.724    15  0.0171 Preprocessor1_Model…
## 3     8   298    35 accuracy binary     0.719    15  0.0254 Preprocessor1_Model…
## 4     8    94    18 accuracy binary     0.718    15  0.0273 Preprocessor1_Model…
## 5     4  1094    36 accuracy binary     0.714    15  0.0212 Preprocessor1_Model…</code></pre>
<p>Show_best() is used to show the top 5 best performing models based on the accuracy metric. <span class="citation"><span>“Tidymodels - <span>Welcome</span>!”</span> (n.d.)</span></p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="id_05.html#cb62-1" tabindex="-1"></a>bcData_ranger_tree <span class="ot">&lt;-</span> bcData_ranger_best_trees <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="st">&quot;mtry&quot;</span>, <span class="st">&quot;trees&quot;</span>, <span class="st">&quot;min_n&quot;</span>, <span class="st">&quot;.config&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">row_number</span>() <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb62-2"><a href="id_05.html#cb62-2" tabindex="-1"></a>bcData_ranger_tree</span></code></pre></div>
<pre><code>## # A tibble: 1 × 4
##    mtry trees min_n .config              
##   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;                
## 1     1  1877    10 Preprocessor1_Model23</code></pre>
<p>a model has been chosen using a combination of the select and filter</p>
</div>
<div id="creating-a-random-forest-model-using-randomforest" class="section level3">
<h3>Creating a random forest model using randomForest</h3>
<p>The same principle as ranger will be used, but now with the randomForest engine.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="id_05.html#cb64-1" tabindex="-1"></a><span class="co"># train the model</span></span>
<span id="cb64-2"><a href="id_05.html#cb64-2" tabindex="-1"></a>bcData_rf_randomForest_mod <span class="ot">&lt;-</span> <span class="fu">rand_forest</span>(</span>
<span id="cb64-3"><a href="id_05.html#cb64-3" tabindex="-1"></a>  <span class="at">mtry =</span> <span class="fu">tune</span>(), <span class="co"># amount of features per decision tree</span></span>
<span id="cb64-4"><a href="id_05.html#cb64-4" tabindex="-1"></a>  <span class="at">trees =</span> <span class="fu">tune</span>(), <span class="co"># number of trees</span></span>
<span id="cb64-5"><a href="id_05.html#cb64-5" tabindex="-1"></a>  <span class="at">min_n =</span> <span class="fu">tune</span>(), <span class="co"># minimal node size</span></span>
<span id="cb64-6"><a href="id_05.html#cb64-6" tabindex="-1"></a>) <span class="sc">%&gt;%</span> <span class="fu">set_engine</span>(<span class="st">&quot;randomForest&quot;</span>, <span class="at">num.threads =</span> cores<span class="dv">-1</span>) <span class="sc">%&gt;%</span> <span class="fu">set_mode</span>(<span class="st">&quot;classification&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">translate</span>()</span>
<span id="cb64-7"><a href="id_05.html#cb64-7" tabindex="-1"></a><span class="co"># using the ranger engine</span></span>
<span id="cb64-8"><a href="id_05.html#cb64-8" tabindex="-1"></a><span class="co"># using all available cores except 1 </span></span>
<span id="cb64-9"><a href="id_05.html#cb64-9" tabindex="-1"></a><span class="co"># so that other smaller processes on the computer still run</span></span></code></pre></div>
<p>The engine uses 11 cores to train the model. The hyperparameters mtry, trees and min_n will be tuned later on using a grid. The translate function coverts the model to work with parsnip.@TidymodelsWelcome</p>
</div>
<div id="tuning-and-training-the-randomforest-engine-1" class="section level3">
<h3>Tuning and training the randomForest engine</h3>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="id_05.html#cb65-1" tabindex="-1"></a><span class="co"># combining model and recipe into a workflow</span></span>
<span id="cb65-2"><a href="id_05.html#cb65-2" tabindex="-1"></a>bcData_randomForest_rf_workflow <span class="ot">&lt;-</span> <span class="fu">workflow</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb65-3"><a href="id_05.html#cb65-3" tabindex="-1"></a>  <span class="fu">add_model</span>(bcData_rf_randomForest_mod) <span class="sc">%&gt;%</span></span>
<span id="cb65-4"><a href="id_05.html#cb65-4" tabindex="-1"></a>  <span class="fu">add_recipe</span>(bcData_rf_rec)</span></code></pre></div>
<p>The same recipe as last time is used, but this time the new randomForest model is added.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="id_05.html#cb66-1" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">777</span>)</span>
<span id="cb66-2"><a href="id_05.html#cb66-2" tabindex="-1"></a><span class="co"># tune the model</span></span>
<span id="cb66-3"><a href="id_05.html#cb66-3" tabindex="-1"></a>bcData_randomForest_lr_res <span class="ot">&lt;-</span> </span>
<span id="cb66-4"><a href="id_05.html#cb66-4" tabindex="-1"></a>  bcData_randomForest_rf_workflow <span class="sc">%&gt;%</span> </span>
<span id="cb66-5"><a href="id_05.html#cb66-5" tabindex="-1"></a>  <span class="fu">tune_grid</span>(<span class="at">resamples =</span> folds,</span>
<span id="cb66-6"><a href="id_05.html#cb66-6" tabindex="-1"></a>            <span class="at">grid =</span> <span class="dv">50</span>,</span>
<span id="cb66-7"><a href="id_05.html#cb66-7" tabindex="-1"></a>            <span class="at">control =</span> <span class="fu">control_grid</span>(<span class="at">save_pred =</span> <span class="cn">TRUE</span>),</span>
<span id="cb66-8"><a href="id_05.html#cb66-8" tabindex="-1"></a>            <span class="at">metrics =</span> <span class="fu">metric_set</span>(roc_auc, accuracy))</span>
<span id="cb66-9"><a href="id_05.html#cb66-9" tabindex="-1"></a>bcData_randomForest_lr_res</span></code></pre></div>
<pre><code>## # Tuning results
## # 15-fold cross-validation using stratification 
## # A tibble: 15 × 5
##    splits           id     .metrics           .notes           .predictions
##    &lt;list&gt;           &lt;chr&gt;  &lt;list&gt;             &lt;list&gt;           &lt;list&gt;      
##  1 &lt;split [185/14]&gt; Fold01 &lt;tibble [100 × 7]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
##  2 &lt;split [185/14]&gt; Fold02 &lt;tibble [100 × 7]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
##  3 &lt;split [185/14]&gt; Fold03 &lt;tibble [100 × 7]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
##  4 &lt;split [185/14]&gt; Fold04 &lt;tibble [100 × 7]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
##  5 &lt;split [185/14]&gt; Fold05 &lt;tibble [100 × 7]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
##  6 &lt;split [186/13]&gt; Fold06 &lt;tibble [100 × 7]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
##  7 &lt;split [186/13]&gt; Fold07 &lt;tibble [100 × 7]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
##  8 &lt;split [186/13]&gt; Fold08 &lt;tibble [100 × 7]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
##  9 &lt;split [186/13]&gt; Fold09 &lt;tibble [100 × 7]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
## 10 &lt;split [186/13]&gt; Fold10 &lt;tibble [100 × 7]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
## 11 &lt;split [186/13]&gt; Fold11 &lt;tibble [100 × 7]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
## 12 &lt;split [186/13]&gt; Fold12 &lt;tibble [100 × 7]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
## 13 &lt;split [186/13]&gt; Fold13 &lt;tibble [100 × 7]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
## 14 &lt;split [186/13]&gt; Fold14 &lt;tibble [100 × 7]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
## 15 &lt;split [187/12]&gt; Fold15 &lt;tibble [100 × 7]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;</code></pre>
<p>The grid function is used to tune the model. The resamples parameter indicates that the earlier folds are being used. The grid parameter indicates the amount of models that will be made and compared for the best performance. Using the control and metrics parameters the predictions, roc_auc and accuracy are saved. <span class="citation"><span>“Tidymodels - <span>Welcome</span>!”</span> (n.d.)</span></p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="id_05.html#cb68-1" tabindex="-1"></a><span class="fu">autoplot</span>(bcData_randomForest_lr_res)</span></code></pre></div>
<p><img src="_main_files/figure-html/plot%20the%20tuned%20randomForest%20results-1.png" width="672" /></p>
<p>autoplot is used to show the effect of parameters on the accuracy and roc_auc results.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="id_05.html#cb69-1" tabindex="-1"></a><span class="co"># mtry + min_n</span></span>
<span id="cb69-2"><a href="id_05.html#cb69-2" tabindex="-1"></a>bcData_randomForest_lr_res <span class="sc">%&gt;%</span></span>
<span id="cb69-3"><a href="id_05.html#cb69-3" tabindex="-1"></a>  <span class="fu">collect_metrics</span>() <span class="sc">%&gt;%</span></span>
<span id="cb69-4"><a href="id_05.html#cb69-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mtry =</span> <span class="fu">factor</span>(mtry)) <span class="sc">%&gt;%</span></span>
<span id="cb69-5"><a href="id_05.html#cb69-5" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(min_n, mean, <span class="at">color =</span> mtry)) <span class="sc">+</span></span>
<span id="cb69-6"><a href="id_05.html#cb69-6" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">1.5</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb69-7"><a href="id_05.html#cb69-7" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb69-8"><a href="id_05.html#cb69-8" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> .metric, <span class="at">scales =</span> <span class="st">&quot;free&quot;</span>, <span class="at">nrow =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb69-9"><a href="id_05.html#cb69-9" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_number</span>()) <span class="sc">+</span></span>
<span id="cb69-10"><a href="id_05.html#cb69-10" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>(<span class="at">option =</span> <span class="st">&quot;plasma&quot;</span>, <span class="at">begin =</span> .<span class="dv">9</span>, <span class="at">end =</span> <span class="dv">0</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/plot%20mtry%20and%20min_n%20randomForest-1.png" width="672" /></p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="id_05.html#cb70-1" tabindex="-1"></a><span class="co"># mtry + trees</span></span>
<span id="cb70-2"><a href="id_05.html#cb70-2" tabindex="-1"></a>bcData_randomForest_lr_res <span class="sc">%&gt;%</span></span>
<span id="cb70-3"><a href="id_05.html#cb70-3" tabindex="-1"></a>  <span class="fu">collect_metrics</span>() <span class="sc">%&gt;%</span></span>
<span id="cb70-4"><a href="id_05.html#cb70-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mtry =</span> <span class="fu">factor</span>(mtry)) <span class="sc">%&gt;%</span></span>
<span id="cb70-5"><a href="id_05.html#cb70-5" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(trees, mean, <span class="at">color =</span> mtry)) <span class="sc">+</span></span>
<span id="cb70-6"><a href="id_05.html#cb70-6" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">1.5</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb70-7"><a href="id_05.html#cb70-7" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb70-8"><a href="id_05.html#cb70-8" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> .metric, <span class="at">scales =</span> <span class="st">&quot;free&quot;</span>, <span class="at">nrow =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb70-9"><a href="id_05.html#cb70-9" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_number</span>()) <span class="sc">+</span></span>
<span id="cb70-10"><a href="id_05.html#cb70-10" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>(<span class="at">option =</span> <span class="st">&quot;plasma&quot;</span>, <span class="at">begin =</span> .<span class="dv">9</span>, <span class="at">end =</span> <span class="dv">0</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/plot%20mtry%20and%20trees%20randomForest-1.png" width="672" /></p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="id_05.html#cb71-1" tabindex="-1"></a><span class="co"># min_n + trees</span></span>
<span id="cb71-2"><a href="id_05.html#cb71-2" tabindex="-1"></a>bcData_randomForest_lr_res <span class="sc">%&gt;%</span></span>
<span id="cb71-3"><a href="id_05.html#cb71-3" tabindex="-1"></a>  <span class="fu">collect_metrics</span>() <span class="sc">%&gt;%</span></span>
<span id="cb71-4"><a href="id_05.html#cb71-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">min_n =</span> <span class="fu">factor</span>(min_n)) <span class="sc">%&gt;%</span></span>
<span id="cb71-5"><a href="id_05.html#cb71-5" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(trees, mean, <span class="at">color =</span> min_n)) <span class="sc">+</span></span>
<span id="cb71-6"><a href="id_05.html#cb71-6" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">1.5</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb71-7"><a href="id_05.html#cb71-7" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb71-8"><a href="id_05.html#cb71-8" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> .metric, <span class="at">scales =</span> <span class="st">&quot;free&quot;</span>, <span class="at">nrow =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb71-9"><a href="id_05.html#cb71-9" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_number</span>()) <span class="sc">+</span></span>
<span id="cb71-10"><a href="id_05.html#cb71-10" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>(<span class="at">option =</span> <span class="st">&quot;plasma&quot;</span>, <span class="at">begin =</span> .<span class="dv">9</span>, <span class="at">end =</span> <span class="dv">0</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/min_n%20and%20trees%20plotted%20randomForest-1.png" width="672" /></p>
<p>The figures above show the correlation between the hyperparameters and the metrics. The first figure shows the correlation between the mtry and min_n hyperparameters. The second figure shows the correlation between the mtry and trees hyperparameters. The third figure shows the correlation between the min_n and trees hyperparameters. The Y axis shows the mean of the metric and the X axis and colors show the hyperparameters. These figures can be used to see how certain parameters affect eachother. For example mtry might have a really high mean, but a low mean when combined with a certain value of min_n. It also shows that like the ranger models the randomForest models again tend to have the best performance with a mtry of 1 and a higher min_n.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="id_05.html#cb72-1" tabindex="-1"></a>bcData_randomForest_best_trees <span class="ot">&lt;-</span> bcData_randomForest_lr_res <span class="sc">%&gt;%</span></span>
<span id="cb72-2"><a href="id_05.html#cb72-2" tabindex="-1"></a>  <span class="fu">show_best</span>(<span class="at">metric =</span> <span class="st">&quot;accuracy&quot;</span>)</span>
<span id="cb72-3"><a href="id_05.html#cb72-3" tabindex="-1"></a>bcData_randomForest_best_trees</span></code></pre></div>
<pre><code>## # A tibble: 5 × 9
##    mtry trees min_n .metric  .estimator  mean     n std_err .config             
##   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;               
## 1     1  1877    10 accuracy binary     0.734    15 0.0145  Preprocessor1_Model…
## 2     1   833    10 accuracy binary     0.729    15 0.0157  Preprocessor1_Model…
## 3     1    54    34 accuracy binary     0.714    15 0.00713 Preprocessor1_Model…
## 4     2  1435    13 accuracy binary     0.709    15 0.0234  Preprocessor1_Model…
## 5     2   416    18 accuracy binary     0.708    15 0.0237  Preprocessor1_Model…</code></pre>
<p>Show_best() is used to show the top 5 best performing models based on the accuracy metric.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="id_05.html#cb74-1" tabindex="-1"></a>bcData_randomForest_tree <span class="ot">&lt;-</span> bcData_randomForest_best_trees <span class="sc">%&gt;%</span>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="st">&quot;mtry&quot;</span>, <span class="st">&quot;trees&quot;</span>, <span class="st">&quot;min_n&quot;</span>, <span class="st">&quot;.config&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">row_number</span>() <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb74-2"><a href="id_05.html#cb74-2" tabindex="-1"></a>bcData_randomForest_tree</span></code></pre></div>
<pre><code>## # A tibble: 1 × 4
##    mtry trees min_n .config              
##   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;                
## 1     1  1877    10 Preprocessor1_Model23</code></pre>
<p>A model has been chosen using a combination of the select and filter</p>
</div>
<div id="final-models-comparison" class="section level3">
<h3>Final models comparison</h3>
<p>The best performing models are compared to each other using the finalize_workflow() function. This function overwrites the earlier workflow with the parameters from the best performing model. The last_fit() function is then used to fit the model to the test set and see the performance. <span class="citation"><span>“Tidymodels - <span>Welcome</span>!”</span> (n.d.)</span></p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="id_05.html#cb76-1" tabindex="-1"></a><span class="co"># using the best performing ranger model</span></span>
<span id="cb76-2"><a href="id_05.html#cb76-2" tabindex="-1"></a>bcData_ranger_final_workflow <span class="ot">&lt;-</span> </span>
<span id="cb76-3"><a href="id_05.html#cb76-3" tabindex="-1"></a>  bcData_ranger_rf_workflow <span class="sc">%&gt;%</span> </span>
<span id="cb76-4"><a href="id_05.html#cb76-4" tabindex="-1"></a>  <span class="fu">finalize_workflow</span>(bcData_ranger_tree)</span>
<span id="cb76-5"><a href="id_05.html#cb76-5" tabindex="-1"></a></span>
<span id="cb76-6"><a href="id_05.html#cb76-6" tabindex="-1"></a><span class="co"># fit ranger model</span></span>
<span id="cb76-7"><a href="id_05.html#cb76-7" tabindex="-1"></a>bcData_ranger_final_fit <span class="ot">&lt;-</span> </span>
<span id="cb76-8"><a href="id_05.html#cb76-8" tabindex="-1"></a>  bcData_ranger_final_workflow <span class="sc">%&gt;%</span></span>
<span id="cb76-9"><a href="id_05.html#cb76-9" tabindex="-1"></a>  <span class="fu">last_fit</span>(bcData_split) </span>
<span id="cb76-10"><a href="id_05.html#cb76-10" tabindex="-1"></a></span>
<span id="cb76-11"><a href="id_05.html#cb76-11" tabindex="-1"></a><span class="co"># using the best performing randomForest model</span></span>
<span id="cb76-12"><a href="id_05.html#cb76-12" tabindex="-1"></a>bcData_randomForest_final_workflow <span class="ot">&lt;-</span> </span>
<span id="cb76-13"><a href="id_05.html#cb76-13" tabindex="-1"></a>  bcData_randomForest_rf_workflow <span class="sc">%&gt;%</span> </span>
<span id="cb76-14"><a href="id_05.html#cb76-14" tabindex="-1"></a>  <span class="fu">finalize_workflow</span>(bcData_randomForest_tree)</span>
<span id="cb76-15"><a href="id_05.html#cb76-15" tabindex="-1"></a></span>
<span id="cb76-16"><a href="id_05.html#cb76-16" tabindex="-1"></a><span class="co"># fit randomForest model</span></span>
<span id="cb76-17"><a href="id_05.html#cb76-17" tabindex="-1"></a>bcData_randomForest_final_fit <span class="ot">&lt;-</span> </span>
<span id="cb76-18"><a href="id_05.html#cb76-18" tabindex="-1"></a>  bcData_randomForest_final_workflow <span class="sc">%&gt;%</span></span>
<span id="cb76-19"><a href="id_05.html#cb76-19" tabindex="-1"></a>  <span class="fu">last_fit</span>(bcData_split) </span></code></pre></div>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="id_05.html#cb77-1" tabindex="-1"></a><span class="co"># ranger metrics</span></span>
<span id="cb77-2"><a href="id_05.html#cb77-2" tabindex="-1"></a>bcData_ranger_final_fit <span class="sc">%&gt;%</span></span>
<span id="cb77-3"><a href="id_05.html#cb77-3" tabindex="-1"></a>  <span class="fu">collect_metrics</span>()</span></code></pre></div>
<pre><code>## # A tibble: 3 × 4
##   .metric     .estimator .estimate .config             
##   &lt;chr&gt;       &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;               
## 1 accuracy    binary         0.747 Preprocessor1_Model1
## 2 roc_auc     binary         0.799 Preprocessor1_Model1
## 3 brier_class binary         0.168 Preprocessor1_Model1</code></pre>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="id_05.html#cb79-1" tabindex="-1"></a><span class="co"># randomForest metrics</span></span>
<span id="cb79-2"><a href="id_05.html#cb79-2" tabindex="-1"></a>bcData_randomForest_final_fit <span class="sc">%&gt;%</span></span>
<span id="cb79-3"><a href="id_05.html#cb79-3" tabindex="-1"></a>  <span class="fu">collect_metrics</span>()</span></code></pre></div>
<pre><code>## # A tibble: 3 × 4
##   .metric     .estimator .estimate .config             
##   &lt;chr&gt;       &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;               
## 1 accuracy    binary         0.770 Preprocessor1_Model1
## 2 roc_auc     binary         0.775 Preprocessor1_Model1
## 3 brier_class binary         0.171 Preprocessor1_Model1</code></pre>
<p>The accuracy shows how many values of the test set were correctly predicted The ROC AUC is the area under the ROC curve. The ROC curve itself is made by plotting the true positive rate against the false positive rate. This shows the ability of the model to distinquish between non-recurrence-events and recurrence-events. A model can have a high accuracy even though the roc_auc is low. An example could be that a large proportion of the data is non-recurrence-events and the model then keeps guessing non-recurrence events, because it has a higher chance to be correct. The brier_class is used to determine the overall performance of the model. The lower the brier_class the better the model. The values range between 0 and 1. This shows that the ranger model has the best overall performance. <span class="citation"><span>“Tidymodels - <span>Welcome</span>!”</span> (n.d.)</span></p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="id_05.html#cb81-1" tabindex="-1"></a><span class="co"># predictions ranger</span></span>
<span id="cb81-2"><a href="id_05.html#cb81-2" tabindex="-1"></a>bcData_ROC_ranger <span class="ot">&lt;-</span> bcData_ranger_final_fit <span class="sc">%&gt;%</span></span>
<span id="cb81-3"><a href="id_05.html#cb81-3" tabindex="-1"></a>  <span class="fu">collect_predictions</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb81-4"><a href="id_05.html#cb81-4" tabindex="-1"></a>  <span class="fu">roc_curve</span>(class, .pred_NRE) <span class="sc">%&gt;%</span> </span>
<span id="cb81-5"><a href="id_05.html#cb81-5" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">model =</span> <span class="st">&quot;ranger&quot;</span>)</span>
<span id="cb81-6"><a href="id_05.html#cb81-6" tabindex="-1"></a></span>
<span id="cb81-7"><a href="id_05.html#cb81-7" tabindex="-1"></a><span class="co"># predictions randomForest</span></span>
<span id="cb81-8"><a href="id_05.html#cb81-8" tabindex="-1"></a>bcData_ROC_randomForest <span class="ot">&lt;-</span> bcData_randomForest_final_fit <span class="sc">%&gt;%</span></span>
<span id="cb81-9"><a href="id_05.html#cb81-9" tabindex="-1"></a>  <span class="fu">collect_predictions</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb81-10"><a href="id_05.html#cb81-10" tabindex="-1"></a>  <span class="fu">roc_curve</span>(class, .pred_NRE) <span class="sc">%&gt;%</span> </span>
<span id="cb81-11"><a href="id_05.html#cb81-11" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">model =</span> <span class="st">&quot;randomForest&quot;</span>)</span>
<span id="cb81-12"><a href="id_05.html#cb81-12" tabindex="-1"></a></span>
<span id="cb81-13"><a href="id_05.html#cb81-13" tabindex="-1"></a><span class="co"># bind the data together in one plot</span></span>
<span id="cb81-14"><a href="id_05.html#cb81-14" tabindex="-1"></a><span class="fu">bind_rows</span>(bcData_ROC_ranger, bcData_ROC_randomForest) <span class="sc">%&gt;%</span> </span>
<span id="cb81-15"><a href="id_05.html#cb81-15" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">1</span> <span class="sc">-</span> specificity, <span class="at">y =</span> sensitivity, <span class="at">col =</span> model)) <span class="sc">+</span> </span>
<span id="cb81-16"><a href="id_05.html#cb81-16" tabindex="-1"></a>  <span class="fu">geom_path</span>(<span class="at">lwd =</span> <span class="fl">1.5</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb81-17"><a href="id_05.html#cb81-17" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">lty =</span> <span class="dv">3</span>) <span class="sc">+</span> </span>
<span id="cb81-18"><a href="id_05.html#cb81-18" tabindex="-1"></a>  <span class="fu">coord_equal</span>() <span class="sc">+</span> </span>
<span id="cb81-19"><a href="id_05.html#cb81-19" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>(<span class="at">option =</span> <span class="st">&quot;plasma&quot;</span>, <span class="at">end =</span> .<span class="dv">6</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/ROC%20plot-1.png" width="672" /></p>
<p>The figure above this paragraph is the ROC. Both randomForest and ranger have very similar results though ranger performs slightly better.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="id_05.html#cb82-1" tabindex="-1"></a>bcData_ranger_final_tree <span class="ot">&lt;-</span> <span class="fu">extract_workflow</span>(bcData_ranger_final_fit)</span>
<span id="cb82-2"><a href="id_05.html#cb82-2" tabindex="-1"></a>bcData_ranger_final_tree</span></code></pre></div>
<pre><code>## ══ Workflow [trained] ═══════════════════════════════════════════════════
## Preprocessor: Recipe
## Model: rand_forest()
## 
## ── Preprocessor ─────────────────────────────────────────────────────────
## 1 Recipe Step
## 
## • step_zv()
## 
## ── Model ────────────────────────────────────────────────────────────────
## Ranger result
## 
## Call:
##  ranger::ranger(x = maybe_data_frame(x), y = y, mtry = min_cols(~1L,      x), num.trees = ~1877L, min.node.size = min_rows(~10L, x),      num.threads = ~cores - 1, importance = ~&quot;impurity&quot;, verbose = FALSE,      seed = sample.int(10^5, 1), probability = TRUE) 
## 
## Type:                             Probability estimation 
## Number of trees:                  1877 
## Sample size:                      199 
## Number of independent variables:  9 
## Mtry:                             1 
## Target node size:                 10 
## Variable importance mode:         impurity 
## Splitrule:                        gini 
## OOB prediction error (Brier s.):  0.1942307</code></pre>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="id_05.html#cb84-1" tabindex="-1"></a>bcData_randomForest_final_tree <span class="ot">&lt;-</span> <span class="fu">extract_workflow</span>(bcData_randomForest_final_fit)</span>
<span id="cb84-2"><a href="id_05.html#cb84-2" tabindex="-1"></a>bcData_randomForest_final_tree</span></code></pre></div>
<pre><code>## ══ Workflow [trained] ═══════════════════════════════════════════════════
## Preprocessor: Recipe
## Model: rand_forest()
## 
## ── Preprocessor ─────────────────────────────────────────────────────────
## 1 Recipe Step
## 
## • step_zv()
## 
## ── Model ────────────────────────────────────────────────────────────────
## 
## Call:
##  randomForest(x = maybe_data_frame(x), y = y, ntree = ~1877L,      mtry = min_cols(~1L, x), nodesize = min_rows(~10L, x), num.threads = ~cores -          1) 
##                Type of random forest: classification
##                      Number of trees: 1877
## No. of variables tried at each split: 1
## 
##         OOB estimate of  error rate: 28.14%
## Confusion matrix:
##     NRE RE class.error
## NRE 137  3  0.02142857
## RE   53  6  0.89830508</code></pre>
<p><a href="https://www.tidymodels.org/learn/models/conformal-regression/" class="uri">https://www.tidymodels.org/learn/models/conformal-regression/</a></p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="id_05.html#cb86-1" tabindex="-1"></a><span class="fu">library</span>(vip)</span>
<span id="cb86-2"><a href="id_05.html#cb86-2" tabindex="-1"></a>bcData_ranger_final_tree <span class="sc">%&gt;%</span> </span>
<span id="cb86-3"><a href="id_05.html#cb86-3" tabindex="-1"></a>  <span class="fu">extract_fit_parsnip</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb86-4"><a href="id_05.html#cb86-4" tabindex="-1"></a>  <span class="fu">vip</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/show%20the%20importance%20of%20the%20features-1.png" width="672" /></p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="id_05.html#cb87-1" tabindex="-1"></a>bcData_randomForest_final_tree <span class="sc">%&gt;%</span> </span>
<span id="cb87-2"><a href="id_05.html#cb87-2" tabindex="-1"></a>  <span class="fu">extract_fit_parsnip</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb87-3"><a href="id_05.html#cb87-3" tabindex="-1"></a>  <span class="fu">vip</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/show%20the%20importance%20of%20the%20features-2.png" width="672" /></p>
<p>The vip function is used to show the most important features in the model. The ranger model shows that the most important features for it’s model are the degree of malignancy, then the tumor size, etc. The randomForest model shows that the most important feature is the tumor_size and then the inv_nodes, etc. Both graphs show that it’s not of importance which breast the tumor is located in.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="id_04.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="id_06.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true,
"toc_depth": 3
}
});
});
</script>

</body>

</html>
